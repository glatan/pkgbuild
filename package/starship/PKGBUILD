# Maintainer: glatan <glatan [dot] edu [at] gmail [dot] com>

pkgname='starship'
pkgver='0.43.0'
pkgrel='1'
pkgdesc='The cross-shell prompt for astronauts.'
arch=('x86_64')
url='https://starship.rs/'
license=('ISC')
depends=('openssl' 'zlib')
makedepends=('rust')
checkdepends=('python' 'rust')
optdepends=('powerline-font: powerline symbols for terminal')
install="${pkgname}.install"
source=("https://github.com/${pkgname}/${pkgname}/archive/v${pkgver}.tar.gz")
sha512sums=('35a4626d631238ee78ee8bdebc50ffb244809fa68a6839d9d0b287d89ffb98b5e63e082cf211559ea52aa1720997a5ed6a5cf5819ef7aa724fa0594f3f25861d')
b2sums=('bc1e0fd936ac15608642a2cb48ca9b7b9b3381b8b013f0a70d8a49225f39ea798b45e26ce6a26a19043d9665e6d9470161736e4e3b9d44098cfbf0592ef8f7fd')

build() {
	cd "${pkgname}-${pkgver}" || exit
	cargo build --release --locked
}

check() {
	cd "${pkgname}-${pkgver}" || exit
	cargo test --locked
}

package() {
	cd "${pkgname}-${pkgver}" || exit
	install -Dm755 "target/release/${pkgname}" -t "${pkgdir}/usr/bin"
	install -Dm644 LICENSE -t "${pkgdir}/usr/share/licenses/${pkgname}"
}
